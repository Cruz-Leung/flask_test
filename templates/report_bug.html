{% extends "base.html" %}

{% block title %}Report a Bug - Cruzy Coffee Co.{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <!-- Header -->
            <div class="text-center mb-5">
                <i class="bi bi-bug-fill text-danger" style="font-size: 4rem;"></i>
                <h1 class="display-5 fw-bold mt-3">Report a Bug</h1>
                <p class="lead text-muted">
                    Help us improve by reporting any issues you've encountered
                </p>
            </div>

            <!-- Bug Report Form -->
            <div class="card border-0 shadow-sm">
                <div class="card-body p-4 p-md-5">
                    <form method="POST" action="{{ url_for('report_bug') }}">
                        <!-- Bug Title -->
                        <div class="mb-4">
                            <label for="bug_title" class="form-label fw-bold">
                                <i class="bi bi-pencil me-2"></i>Bug Title *
                            </label>
                            <input type="text" 
                                   class="form-control form-control-lg" 
                                   id="bug_title" 
                                   name="bug_title" 
                                   placeholder="Brief description of the issue"
                                   required>
                            <small class="text-muted">Summarize the bug in one sentence</small>
                        </div>

                        <!-- Bug Category -->
                        <div class="mb-4">
                            <label for="bug_category" class="form-label fw-bold">
                                <i class="bi bi-tags me-2"></i>Category *
                            </label>
                            <select class="form-select form-select-lg" id="bug_category" name="bug_category" required>
                                <option value="" selected disabled>Choose a category...</option>
                                <option value="ui">üé® User Interface / Design</option>
                                <option value="functionality">‚öôÔ∏è Functionality / Features</option>
                                <option value="performance">‚ö° Performance / Speed</option>
                                <option value="cart">üõí Shopping Cart / Checkout</option>
                                <option value="account">üë§ Account / Login</option>
                                <option value="product">üì¶ Product Display / Info</option>
                                <option value="other">üîß Other</option>
                            </select>
                        </div>

                        <!-- Bug Description -->
                        <div class="mb-4">
                            <label for="bug_description" class="form-label fw-bold">
                                <i class="bi bi-chat-left-text me-2"></i>Detailed Description *
                            </label>
                            <textarea class="form-control" 
                                      id="bug_description" 
                                      name="bug_description" 
                                      rows="6" 
                                      placeholder="Please describe the bug in detail. Include:&#10;- What you were trying to do&#10;- What happened instead&#10;- Steps to reproduce the issue"
                                      required></textarea>
                            <small class="text-muted">The more details, the better we can help!</small>
                        </div>

                        <!-- Browser/Device Info -->
                        <div class="mb-4">
                            <label for="bug_device" class="form-label fw-bold">
                                <i class="bi bi-laptop me-2"></i>Device / Browser (Optional)
                            </label>
                            <input type="text" 
                                   class="form-control" 
                                   id="bug_device" 
                                   name="bug_device" 
                                   placeholder="e.g., Chrome on Windows, Safari on iPhone">
                            <small class="text-muted">Helps us reproduce the issue</small>
                        </div>

                        <!-- Severity Level -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">
                                <i class="bi bi-speedometer2 me-2"></i>Severity Level *
                            </label>
                            <div class="btn-group w-100" role="group">
                                <input type="radio" class="btn-check" name="bug_severity" id="severity_low" value="low" required>
                                <label class="btn btn-outline-success" for="severity_low">
                                    üü¢ Low<br><small class="text-muted">Minor issue</small>
                                </label>

                                <input type="radio" class="btn-check" name="bug_severity" id="severity_medium" value="medium" checked>
                                <label class="btn btn-outline-warning" for="severity_medium">
                                    üü° Medium<br><small class="text-muted">Noticeable problem</small>
                                </label>

                                <input type="radio" class="btn-check" name="bug_severity" id="severity_high" value="high">
                                <label class="btn btn-outline-danger" for="severity_high">
                                    üî¥ High<br><small class="text-muted">Critical issue</small>
                                </label>
                            </div>
                        </div>

                        <!-- User Info Display -->
                        <div class="alert alert-light border mb-4">
                            <p class="mb-1">
                                <strong>Submitted by:</strong> {{ session.user_name }}
                            </p>
                            <p class="mb-0 text-muted small">
                                <i class="bi bi-info-circle me-1"></i>
                                We'll use this information to follow up if needed
                            </p>
                        </div>

                        <!-- Submit Button -->
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-danger btn-lg">
                                <i class="bi bi-send-fill me-2"></i>Submit Bug Report
                            </button>
                            <a href="{{ url_for('about') }}" class="btn btn-outline-secondary">
                                <i class="bi bi-arrow-left me-2"></i>Back to About
                            </a>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Help Text -->
            <div class="text-center mt-4">
                <p class="text-muted small">
                    <i class="bi bi-shield-lock me-1"></i>
                    Your bug report will be reviewed by our team. Thank you for helping us improve!
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}