{% extends "base.html" %}

{% block title %}Home - Cruzy Coffee Co.{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero text-center text-white d-flex align-items-center"
         style="background-image: url('{{ url_for('static', filename='img/Homepage_cof.webp') }}'); min-height:75vh; background-position:center; background-size:cover;">
    <div class="container py-6">
        <h1 class="display-4 fw-bold">Discover exceptional coffee</h1>
        <p class="lead mb-4">Specialty beans, premium machines and crafted accessories.</p>
        <a href="#product-categories" class="btn btn-outline-light btn-lg scroll-to-categories">Shop Coffee</a>
    </div>
</section>

<!-- Promotional cards -->
<section class="container py-5">
    <div class="row g-4 align-items-stretch">
        <!-- Left: On Sale machine -->
        <div class="col-12 col-lg-6">
            <a href="{{ url_for('machines', category='semi-auto') }}" class="text-decoration-none">
                <div class="position-relative rounded overflow-hidden hero-promo" 
                     style="min-height:54vh; background-image: url('{{ url_for('static', filename='img/breville_express_promo.jpg') }}'); background-size:cover; background-position:center;">
                    <div class="hero-overlay"></div>
                    <div class="hero-content p-5">
                        <span class="badge bg-warning text-dark mb-3">On Sale</span>
                        <h2 class="display-5 fw-bold text-white">Barista Express — 20% Off</h2>
                        <p class="lead text-white">Limited time — our most-loved semi-automatic machine. Free shipping this week.</p>
                        <button class="btn btn-light btn-lg">Shop Machines</button>
                    </div>
                </div>
            </a>
        </div>

        <!-- Right: Membership option -->
        <div class="col-12 col-lg-6">
            <a href="{{ url_for('about') }}" class="text-decoration-none">
                <div class="position-relative rounded overflow-hidden" style="min-height:54vh; background-image: url('{{ url_for('static', filename='img/promo_membership.jpg') }}'); background-size:cover; background-position:center;">
                    <div style="position:absolute; inset:0; background: linear-gradient(180deg, rgba(245,240,230,0.18), rgba(245,240,230,0.45));"></div>
                    <div style="position:relative; z-index:2; padding:3.5rem;">
                        <h2 class="display-5 fw-bold" style="color:#1A1A1A;">Join Cruzy Membership</h2>
                        <p class="lead" style="color:#333333;">Exclusive discounts, early access to limited releases and free shipping for members.</p>
                        <button class="btn btn-dark btn-lg">Become a Member</button>
                    </div>
                </div>
            </a>
        </div>
    </div>
</section>

<!-- Product Categories -->
<section id="product-categories" class="container py-5 product-categories">
    <div class="row g-4">
        <div class="col-md-4">
            <div class="card product-card h-100">
                <img src="{{ url_for('static', filename='img/coffee_machine_home_pic.webp') }}" class="card-img-top" alt="Machines">
                <div class="card-body">
                    <h5 class="card-title">Coffee Machines</h5>
                    <p class="card-text text-muted">Home and prosumer espresso machines.</p>
                    <a href="{{ url_for('machines', category='semi-auto') }}" class="btn btn-brown">View Machines</a>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card product-card h-100">
                <img src="{{ url_for('static', filename='img/bean_home.jpg') }}" class="card-img-top" alt="Beans">
                <div class="card-body">
                    <h5 class="card-title">Coffee Beans</h5>
                    <p class="card-text text-muted">Single origin & signature blends.</p>
                    <a href="{{ url_for('beans') }}" class="btn btn-brown">Browse Beans</a>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card product-card h-100">
                <img src="{{ url_for('static', filename='img/coffee_tools_home.webp') }}" class="card-img-top" alt="Accessories">
                <div class="card-body">
                    <h5 class="card-title">Accessories</h5>
                    <p class="card-text text-muted">Grinders, tampers, cups & more.</p>
                    <a href="{{ url_for('accessories') }}" class="btn btn-brown">See Accessories</a>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Smooth scroll to product categories with animation
    const scrollButton = document.querySelector('.scroll-to-categories');
    const productCategories = document.getElementById('product-categories');
    
    if (scrollButton && productCategories) {
      scrollButton.addEventListener('click', (e) => {
        e.preventDefault();
        
        // Scroll to the section
        productCategories.scrollIntoView({ 
          behavior: 'smooth',
          block: 'start'
        });
        
        // Add animation class after scroll
        setTimeout(() => {
          productCategories.classList.add('animate');
        }, 500);
      });
    }

    // Trigger animation on page load if already at the section
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('animate');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.2 });

    if (productCategories) {
      observer.observe(productCategories);
    }
  });
</script>
{% endblock %}